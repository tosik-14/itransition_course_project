База данных для веб-приложения

Таблица Users

id                -       INT AUTO_INCREMENT PRIMARY KEY
name              -       VARCHAR(255) NOT NULL
username          -       VARCHAR(255) NOT NULL
password          -       VARCHAR(255) NOT NULL
role              -       ENUM('user', 'admin') DEFAULT 'user'

Таблица Collections

id                -       INT AUTO_INCREMENT PRIMARY KEY
title             -       VARCHAR(255) NOT NULL
description       -       TEXT
category_id       -       INT NOT NULL (связь с Categories.id)
image_url         -       VARCHAR(255)
user_id           -       INT NOT NULL (связь с Users.id)

Таблица Items

id                -       INT AUTO_INCREMENT PRIMARY KEY
name              -       VARCHAR(255) NOT NULL
collection_id     -       INT NOT NULL (связь с Collections.id)

Таблица Comments

id                -       INT AUTO_INCREMENT PRIMARY KEY
text              -       TEXT NOT NULL
user_id           -       INT NOT NULL (связь с Users.id)
collection_id     -       INT NOT NULL (связь с Collections.id)

Таблица Categories

id                -       INT AUTO_INCREMENT PRIMARY KEY
name              -       VARCHAR(100) NOT NULL UNIQUE

Таблица Tags

id                -       INT AUTO_INCREMENT PRIMARY KEY
name              -       VARCHAR(50) NOT NULL UNIQUE

Таблица Item_tags

item_id           -       INT NOT NULL (связь с Items.id)
tag_id            -       INT NOT NULL (связь с Tags.id)
                          PRIMARY KEY(item_id, tag_id)

Таблица Collection_likes

user_id           -       INT NOT NULL (связь с Users.id)
collection_id     -       INT NOT NULL (связь с Collections.id)
                          PRIMARY KEY(user_id, collection_id)


ВАЖНО!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
ПРИМЕР ПРОВЕРКИ НА ЛАЙК:


INSERT INTO CollectionLikes (user_id, collection_id)
SELECT * FROM (SELECT 1, 2) AS tmp
WHERE NOT EXISTS (
    SELECT 1 FROM CollectionLikes WHERE user_id = 1 AND collection_id = 2
) LIMIT 1;


ВАЖНО!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!




UPDATE Users SET password = '$2a$10$t32pwHUbwgSArkIGMNUNRO1r5fh6AheN5zGEg0PRsZSuphujNQUfO' WHERE email = 'zuika@gmail.com';




INSERT INTO Collection_likes (user_id, collection_id)
VALUES 
('1', '1');


UPDATE Collections
SET image_url = 'https://i.imgur.com/IDYL8lJ.jpeg'
WHERE id = 10;

UPDATE Collections
SET image_url = 'https://i.imgur.com/ODLfaa2.jpeg'
WHERE id = 11;

UPDATE Collections
SET image_url = 'https://i.imgur.com/6IY1brI.png'
WHERE id = 12;

UPDATE Collections
SET image_url = 'https://i.imgur.com/cjP21Q5.jpeg'
WHERE id = 13;



