{"ast":null,"code":"import React,{useState,useEffect}from'react';import Autosuggest from'react-autosuggest';import'bootstrap/dist/css/bootstrap.min.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;// Генератор уникальных идентификаторов\nconst generateId=()=>Date.now()+Math.random();const fetchTags=async()=>{try{const response=await fetch(`${apiUrl}/api/tags`);if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();return data;}catch(error){console.error('Error fetching tags:',error);return[];}};const TagsInput=_ref=>{let{tags,setTags}=_ref;const[allSuggestions,setAllSuggestions]=useState([]);const[suggestions,setSuggestions]=useState([]);const[value,setValue]=useState('');useEffect(()=>{fetchTags().then(tags=>{setAllSuggestions(tags.map(tag=>({id:tag.id,name:tag.name})));setSuggestions(tags.map(tag=>({id:tag.id,name:tag.name})));//console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\n});},[]);const onChange=(event,_ref2)=>{let{newValue}=_ref2;setValue(newValue);//console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\n};const onSuggestionsFetchRequested=_ref3=>{let{value}=_ref3;//console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\nconst inputValue=value.trim().toLowerCase();const inputLength=inputValue.length;const filteredSuggestions=allSuggestions.filter(tag=>tag.name.toLowerCase().slice(0,inputLength)===inputValue);setSuggestions(filteredSuggestions);//console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\n};const onSuggestionSelected=(event,_ref4)=>{let{suggestion}=_ref4;console.log('onSuggestionsFetchRequested 1 tags:',tags,allSuggestions,suggestions);if(!tags.some(tag=>tag.id===suggestion.id)){setTags([...tags,suggestion]);}setValue('');};const addCustomTag=event=>{event.preventDefault();const trimmedValue=value.trim();if(trimmedValue&&!tags.some(tag=>tag.name===trimmedValue)){setTags([...tags,{id:generateId(),name:trimmedValue}]);setValue('');}};const handleDeleteTag=tagId=>{const updatedTags=tags.filter(tag=>tag.id!==tagId);setTags(updatedTags);};const getSuggestionValue=suggestion=>suggestion.name;const renderSuggestion=suggestion=>/*#__PURE__*/_jsx(\"div\",{children:suggestion.name});const inputProps={placeholder:'Type a tag',value,onChange,onKeyDown:event=>{if(event.key==='Enter'){event.preventDefault();addCustomTag(event);}},className:'form-control'// Add Bootstrap classes for input styling\n};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Autosuggest,{suggestions:suggestions,onSuggestionsFetchRequested:onSuggestionsFetchRequested,onSuggestionsClearRequested:()=>setSuggestions(allSuggestions),getSuggestionValue:getSuggestionValue,renderSuggestion:renderSuggestion,inputProps:inputProps,onSuggestionSelected:onSuggestionSelected,theme:{container:'d-flex flex-grow-1',input:'form-control me-2',suggestionsList:'list-group',suggestion:'list-group-item'}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary me-2\",onClick:addCustomTag,children:\"Add Custom Tag\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:tags.map(tag=>/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-secondary me-2 mb-1\",style:{cursor:'pointer'},onClick:()=>handleDeleteTag(tag.id),children:tag.name},tag.id))})]});};export default TagsInput;","map":{"version":3,"names":["React","useState","useEffect","Autosuggest","jsx","_jsx","jsxs","_jsxs","apiUrl","process","env","REACT_APP_API_URL","generateId","Date","now","Math","random","fetchTags","response","fetch","ok","Error","data","json","error","console","TagsInput","_ref","tags","setTags","allSuggestions","setAllSuggestions","suggestions","setSuggestions","value","setValue","then","map","tag","id","name","onChange","event","_ref2","newValue","onSuggestionsFetchRequested","_ref3","inputValue","trim","toLowerCase","inputLength","length","filteredSuggestions","filter","slice","onSuggestionSelected","_ref4","suggestion","log","some","addCustomTag","preventDefault","trimmedValue","handleDeleteTag","tagId","updatedTags","getSuggestionValue","renderSuggestion","children","inputProps","placeholder","onKeyDown","key","className","onSuggestionsClearRequested","theme","container","input","suggestionsList","onClick","style","cursor"],"sources":["E:/itransition_course/course_project/client/src/components/TagsInput.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Autosuggest from 'react-autosuggest';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\n// Генератор уникальных идентификаторов\r\nconst generateId = () => Date.now() + Math.random();\r\n\r\nconst fetchTags = async () => {\r\n  try {\r\n    const response = await fetch(`${apiUrl}/api/tags`);\r\n    if (!response.ok) {\r\n      throw new Error('Network response was not ok');\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching tags:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst TagsInput = ({ tags, setTags }) => {\r\n  const [allSuggestions, setAllSuggestions] = useState([]);\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [value, setValue] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchTags().then((tags) => {\r\n      setAllSuggestions(tags.map(tag => ({ id: tag.id, name: tag.name })));\r\n      setSuggestions(tags.map(tag => ({ id: tag.id, name: tag.name })));\r\n      //console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\r\n    });\r\n  }, []);\r\n\r\n  const onChange = (event, { newValue }) => {\r\n    setValue(newValue);\r\n    //console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\r\n  };\r\n\r\n  const onSuggestionsFetchRequested = ({ value }) => {\r\n    //console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\r\n    const inputValue = value.trim().toLowerCase();\r\n    const inputLength = inputValue.length;\r\n\r\n    const filteredSuggestions = allSuggestions.filter(tag =>\r\n      tag.name.toLowerCase().slice(0, inputLength) === inputValue\r\n    );\r\n\r\n    setSuggestions(filteredSuggestions);\r\n    //console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\r\n  };\r\n\r\n  const onSuggestionSelected = (event, { suggestion }) => {\r\n    console.log('onSuggestionsFetchRequested 1 tags:', tags, allSuggestions, suggestions);\r\n    if (!tags.some(tag => tag.id === suggestion.id)) {\r\n      setTags([...tags, suggestion]);\r\n    }\r\n    setValue('');\r\n  };\r\n\r\n  const addCustomTag = (event) => {\r\n    event.preventDefault();\r\n    const trimmedValue = value.trim();\r\n    if (trimmedValue && !tags.some(tag => tag.name === trimmedValue)) {\r\n      setTags([...tags, { id: generateId(), name: trimmedValue }]);\r\n      setValue('');\r\n    }\r\n  };\r\n\r\n  const handleDeleteTag = (tagId) => {\r\n    \r\n    const updatedTags = tags.filter(tag => tag.id !== tagId);\r\n    setTags(updatedTags);\r\n\r\n  };\r\n\r\n  const getSuggestionValue = (suggestion) => suggestion.name;\r\n\r\n  const renderSuggestion = (suggestion) => (\r\n    <div>{suggestion.name}</div>\r\n  );\r\n\r\n  const inputProps = {\r\n    placeholder: 'Type a tag',\r\n    value,\r\n    onChange,\r\n    onKeyDown: (event) => {\r\n      if (event.key === 'Enter') {\r\n        event.preventDefault();\r\n        addCustomTag(event);\r\n      }\r\n    },\r\n    className: 'form-control'  // Add Bootstrap classes for input styling\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex align-items-center\">\r\n        <Autosuggest\r\n          suggestions={suggestions}\r\n          onSuggestionsFetchRequested={onSuggestionsFetchRequested}\r\n          onSuggestionsClearRequested={() => setSuggestions(allSuggestions)}\r\n          getSuggestionValue={getSuggestionValue}\r\n          renderSuggestion={renderSuggestion}\r\n          inputProps={inputProps}\r\n          onSuggestionSelected={onSuggestionSelected}\r\n          theme={{\r\n            container: 'd-flex flex-grow-1',\r\n            input: 'form-control me-2',\r\n            suggestionsList: 'list-group',\r\n            suggestion: 'list-group-item',\r\n          }}\r\n        />\r\n        <button className=\"btn btn-primary me-2\" onClick={addCustomTag}>\r\n          Add Custom Tag\r\n        </button>\r\n      </div>\r\n      <div className=\"mt-2\">\r\n        {tags.map((tag) => (\r\n          <span key={tag.id} className=\"badge bg-secondary me-2 mb-1\" style={{ cursor: 'pointer' }} onClick={() => handleDeleteTag(tag.id)}>\r\n            {tag.name}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TagsInput;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}