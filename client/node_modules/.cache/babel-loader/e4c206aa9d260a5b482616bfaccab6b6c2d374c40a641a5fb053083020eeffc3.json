{"ast":null,"code":"import axios from 'axios';\nconst apiUrl = process.env.REACT_APP_API_URL;\nexport const getUserName = async (setUserName, setUserId) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/users/me`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setUserName(responce.data.name);\n      //console.log('step 1', responce.data.name);\n      setUserId(responce.data.currentUserId);\n      //console.log('step 2', responce.data.currentUserId);\n      return {\n        name: responce.data.name,\n        userId: responce.data.currentUserId\n      };\n    } catch (error) {\n      console.error('error fetch user name: ', error);\n    }\n  }\n};\nexport const getUserRole = async setUserRole => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/users/role`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setUserRole(responce.data.role);\n      return responce.data.role;\n    } catch (error) {\n      console.error('error fetch user role: ', error);\n    }\n  }\n};\nexport const getProfileName = async (id, setCollectionOwnerName) => {\n  //console.log('getProfileName step 1', id);\n  try {\n    const responce = await axios.get(`${apiUrl}/api/users/nameById`, {\n      params: {\n        id\n      }\n    });\n    setCollectionOwnerName(responce.data.name);\n    //console.log('getProfileName step 2', responce.data.name)\n    return responce.data.name;\n  } catch (error) {\n    console.error('error fetch profile name: ', error);\n  }\n};\nexport const getCollections = async (setCollections, path, supId) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1 user', supId);\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}${path}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        params: {\n          supId\n        }\n      });\n      setCollections(responce.data);\n\n      //console.log('collections: ', responce.data);\n      return responce.data;\n    } catch (error) {\n      console.error('error get collections: ', error);\n    }\n  }\n};\nexport const getLike = async (collectionId, setIsLike) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/collections/like`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        params: {\n          collectionId\n        }\n      });\n      setIsLike(responce.data.isLiked);\n      //console.log('step 2 like', responce.data.isLiked);\n      return responce;\n    } catch (error) {\n      console.error('error like/dislike: ', error);\n    }\n  }\n};\nexport const setComment = async (collectionId, text) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      const responce = await axios.post(`${apiUrl}/api/comments/add`, {\n        collectionId,\n        text\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      //setNewComment(prevComments => [...prevComments, responce.data]);\n      //console.log('step 2 comm utility', responce.data);\n      return responce;\n    } catch (error) {\n      console.error('error add comment: ', error);\n    }\n  }\n};\nexport const getCategories = async setCategories => {\n  //console.log('step 1');\n  try {\n    const responce = await axios.get(`${apiUrl}/api/collections/categories`);\n    setCategories(responce.data);\n    //console.log('step 1 getCategories: ', responce);\n    return responce;\n  } catch (error) {\n    console.error('error to fetch categories: ', error);\n  }\n};\nexport const getTags = async setTags => {\n  //console.log('step 1');\n  try {\n    const responce = await axios.get(`${apiUrl}/api/collections/tags`);\n    setTags(responce.data);\n    //console.log('step 1 gettags: ', responce.data);\n    return responce;\n  } catch (error) {\n    console.error('error to fetch tags: ', error);\n  }\n};\nexport const setNewCollection = async formData => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      //console.log('step 2', formData);\n      const responce = await axios.post(`${apiUrl}/api/collections/create`, formData, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      //console.log('step 3');\n      return responce;\n    } catch (error) {\n      console.error('error add collection: ', error);\n    }\n  }\n};\nconst DROPBOX_API_TOKEN = process.env.REACT_APP_DROPBOX_API_TOKEN; //client secret 715896c8a097121261f9fce4a38628cb72e82cb1 \nconst buftoken = 'sl.B7qrv7D-CIpqm1Lf7bH8rY98NfzRzScW7VnBVQ15Y_9Z3cP05oB1Vie9EH_KbRasZ6g6xpORp1TZSHejGw1lpX8gY60GJ7C8txNQPN5oRdn-34lG5kK6RXy6EG3pHll_7OkgGuW13PLbY3w';\nexport const uploadImageToDropbox = async imageFile => {\n  const formData = new FormData();\n  formData.append('file', imageFile);\n  console.log('utility step 1', imageFile);\n  try {\n    const headers = {\n      //'Authorization': `Bearer ${DROPBOX_API_TOKEN}`,\n      'Authorization': `Bearer ${buftoken}`,\n      'Dropbox-API-Arg': JSON.stringify({\n        path: `/itransition_course_project/${imageFile.name}`,\n        mode: 'add',\n        autorename: true,\n        mute: false,\n        strict_conflict: false\n      }),\n      'Content-Type': 'application/octet-stream'\n    };\n    console.log('headers:', headers);\n    const responсe = await axios.post('https://content.dropboxapi.com/2/files/upload', imageFile, {\n      headers\n    });\n    console.log('utility step 3:', responсe.data);\n    //return responсe.data;\n\n    const responceLink = await axios.post('https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings', {\n      path: `/itransition_course_project/${imageFile.name}`\n    }, {\n      headers: {\n        //'Authorization': `Bearer ${DROPBOX_API_TOKEN}`,\n        'Authorization': `Bearer ${buftoken}`,\n        'Content-Type': 'application/json'\n      }\n    });\n\n    //console.log('utility step 4:', responceLink.data.url);\n    let linkToPict = responceLink.data.url;\n    //console.log('link ver 1:', linkToPict);\n    const resultLink = linkToPict.replace(/dl=0$/, 'raw=1');\n    //console.log('link ver 2:', resultLink);\n    return resultLink;\n  } catch (error) {\n    console.error('error uploading image to dropbox :(:', error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const deleteImageFromDropbox = async imageUlr => {\n  const headers = {\n    'Authorization': `Bearer ${buftoken}`,\n    'Content-Type': 'application/json'\n  };\n  console.log('link default:', imageUlr);\n  const data = {\n    \"url\": imageUlr\n  };\n  let filePath;\n  try {\n    const response = await axios.post('https://api.dropboxapi.com/2/sharing/get_shared_link_metadata', data, {\n      headers\n    });\n    filePath = response.data.path_lower;\n    console.log('filePath: ', filePath);\n  } catch (err) {\n    console.error('error fetching filePath ', err);\n    throw err;\n  }\n  if (filePath) {\n    const path = {\n      \"path\": filePath\n    };\n    try {\n      const res = await axios.post('https://api.dropboxapi.com/2/files/delete_v2', path, {\n        headers\n      });\n      console.log('file deleted', res.data);\n      return res;\n    } catch (err) {\n      console.error('delete file error ', err);\n      throw err;\n    }\n  }\n};\nexport const deleteCollection = async supId => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      console.log('step 2', supId);\n      const responce = await axios.post(`${apiUrl}/api/collections/delete`, {\n        supId\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      //console.log('step 3');\n      return responce;\n    } catch (error) {\n      console.error('error delete collection: ', error);\n    }\n  }\n};","map":{"version":3,"names":["axios","apiUrl","process","env","REACT_APP_API_URL","getUserName","setUserName","setUserId","token","localStorage","getItem","responce","get","headers","Authorization","data","name","currentUserId","userId","error","console","getUserRole","setUserRole","role","getProfileName","id","setCollectionOwnerName","params","getCollections","setCollections","path","supId","getLike","collectionId","setIsLike","isLiked","setComment","text","post","getCategories","setCategories","getTags","setTags","setNewCollection","formData","DROPBOX_API_TOKEN","REACT_APP_DROPBOX_API_TOKEN","buftoken","uploadImageToDropbox","imageFile","FormData","append","log","JSON","stringify","mode","autorename","mute","strict_conflict","responсe","responceLink","linkToPict","url","resultLink","replace","response","message","deleteImageFromDropbox","imageUlr","filePath","path_lower","err","res","deleteCollection"],"sources":["E:/itransition_course/course_project/client/src/components/utility.js"],"sourcesContent":["import axios from 'axios';\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nexport const getUserName = async(setUserName, setUserId) => {\r\n\tconst token = localStorage.getItem('token');\r\n\tif(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/users/me`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setUserName(responce.data.name);\r\n      //console.log('step 1', responce.data.name);\r\n      setUserId(responce.data.currentUserId);\r\n      //console.log('step 2', responce.data.currentUserId);\r\n      return {\r\n        name: responce.data.name,\r\n        userId: responce.data.currentUserId\r\n      };\r\n    }\r\n    catch (error){\r\n      console.error('error fetch user name: ', error);\r\n    }\r\n  }\r\n};\r\n\r\nexport const getUserRole = async(setUserRole) => {\r\n\tconst token = localStorage.getItem('token');\r\n\tif(token){\r\n\t\ttry{\r\n      const responce = await axios.get(`${apiUrl}/api/users/role`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setUserRole(responce.data.role);\r\n      return responce.data.role;\r\n    }\r\n    catch (error){\r\n      console.error('error fetch user role: ', error);\r\n    }\r\n\t}\r\n};\r\n\r\nexport const getProfileName = async(id, setCollectionOwnerName) => {\r\n  //console.log('getProfileName step 1', id);\r\n  try{\r\n    const responce = await axios.get(`${apiUrl}/api/users/nameById`, { \r\n      params: { id } \r\n    });\r\n    setCollectionOwnerName(responce.data.name);\r\n    //console.log('getProfileName step 2', responce.data.name)\r\n    return responce.data.name;\r\n  }\r\n  catch (error){\r\n    console.error('error fetch profile name: ', error);\r\n  }\r\n  \r\n};\r\n\r\n\r\n\r\nexport const getCollections = async(setCollections, path, supId) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1 user', supId);\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}${path}`, { \r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}`},\r\n        params: { supId }\r\n      });\r\n      setCollections(responce.data);\r\n\r\n      //console.log('collections: ', responce.data);\r\n      return responce.data;\r\n    }\r\n    catch (error){\r\n      console.error('error get collections: ', error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const getLike = async(collectionId, setIsLike) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/collections/like`, { \r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}`},\r\n          params: { collectionId }\r\n      });\r\n      setIsLike(responce.data.isLiked);\r\n      //console.log('step 2 like', responce.data.isLiked);\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error like/dislike: ', error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const setComment = async(collectionId, text) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      const responce = await axios.post(`${apiUrl}/api/comments/add`, \r\n        { collectionId, text },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      //setNewComment(prevComments => [...prevComments, responce.data]);\r\n      //console.log('step 2 comm utility', responce.data);\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error add comment: ', error);\r\n    }\r\n  }\r\n};\r\n\r\nexport const getCategories = async(setCategories) => {\r\n  //console.log('step 1');\r\n  try{\r\n    const responce = await axios.get(`${apiUrl}/api/collections/categories`);\r\n    setCategories(responce.data);\r\n    //console.log('step 1 getCategories: ', responce);\r\n    return responce;\r\n  }\r\n  catch (error){\r\n    console.error('error to fetch categories: ', error);\r\n  }\r\n};\r\n\r\nexport const getTags = async(setTags) => {\r\n  //console.log('step 1');\r\n  try{\r\n    const responce = await axios.get(`${apiUrl}/api/collections/tags`);\r\n    setTags(responce.data);\r\n    //console.log('step 1 gettags: ', responce.data);\r\n    return responce;\r\n  }\r\n  catch (error){\r\n    console.error('error to fetch tags: ', error);\r\n  }\r\n};\r\n\r\n\r\nexport const setNewCollection = async(formData) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      //console.log('step 2', formData);\r\n      const responce = await axios.post(`${apiUrl}/api/collections/create`, formData,\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }\r\n      );\r\n      //console.log('step 3');\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error add collection: ', error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\nconst DROPBOX_API_TOKEN = process.env.REACT_APP_DROPBOX_API_TOKEN; //client secret 715896c8a097121261f9fce4a38628cb72e82cb1 \r\nconst buftoken = 'sl.B7qrv7D-CIpqm1Lf7bH8rY98NfzRzScW7VnBVQ15Y_9Z3cP05oB1Vie9EH_KbRasZ6g6xpORp1TZSHejGw1lpX8gY60GJ7C8txNQPN5oRdn-34lG5kK6RXy6EG3pHll_7OkgGuW13PLbY3w';\r\n\r\nexport const uploadImageToDropbox = async (imageFile) => {\r\n  const formData = new FormData();\r\n  formData.append('file', imageFile);\r\n\r\n  console.log('utility step 1', imageFile);\r\n\r\n  \r\n  try {\r\n\r\n    const headers = {\r\n      //'Authorization': `Bearer ${DROPBOX_API_TOKEN}`,\r\n      'Authorization': `Bearer ${buftoken}`,\r\n      'Dropbox-API-Arg': JSON.stringify({\r\n        path: `/itransition_course_project/${imageFile.name}`,\r\n        mode: 'add',\r\n        autorename: true,\r\n        mute: false,\r\n        strict_conflict: false,\r\n      }),\r\n      'Content-Type': 'application/octet-stream'\r\n    };\r\n\r\n    console.log('headers:', headers);\r\n\r\n    const responсe = await axios.post('https://content.dropboxapi.com/2/files/upload', imageFile,  \r\n      { headers } \r\n    );\r\n\r\n    console.log('utility step 3:', responсe.data);\r\n    //return responсe.data;\r\n\r\n\r\n\r\n    const responceLink = await axios.post('https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings',\r\n      { path: `/itransition_course_project/${imageFile.name}`, },\r\n      { headers: {\r\n          //'Authorization': `Bearer ${DROPBOX_API_TOKEN}`,\r\n          'Authorization': `Bearer ${buftoken}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }\r\n    );\r\n\r\n    \r\n    //console.log('utility step 4:', responceLink.data.url);\r\n    let linkToPict = responceLink.data.url;\r\n    //console.log('link ver 1:', linkToPict);\r\n    const resultLink = linkToPict.replace(/dl=0$/, 'raw=1');\r\n    //console.log('link ver 2:', resultLink);\r\n    return resultLink;\r\n    \r\n  } catch (error) {\r\n    console.error('error uploading image to dropbox :(:', error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const deleteImageFromDropbox = async (imageUlr) => {\r\n  \r\n\r\n  const headers = {\r\n    'Authorization': `Bearer ${buftoken}`,\r\n    'Content-Type': 'application/json'\r\n  };\r\n\r\n  console.log('link default:', imageUlr);\r\n\r\n  const data = {\r\n    \"url\": imageUlr\r\n  };\r\n\r\n  let filePath;\r\n  try{\r\n    const response = await axios.post('https://api.dropboxapi.com/2/sharing/get_shared_link_metadata', data, { headers });\r\n    filePath = response.data.path_lower;\r\n\r\n    console.log('filePath: ', filePath);\r\n  }\r\n  catch(err){\r\n    console.error('error fetching filePath ', err);\r\n    throw err;\r\n  }\r\n\r\n  if(filePath){\r\n\r\n    const path = {\r\n      \"path\": filePath\r\n    };\r\n\r\n    try{\r\n      const res = await axios.post('https://api.dropboxapi.com/2/files/delete_v2', path, { headers });\r\n      console.log('file deleted', res.data);\r\n      return res;\r\n    }\r\n    catch(err){\r\n      console.error('delete file error ', err);\r\n      throw err;\r\n    }\r\n\r\n  }\r\n\r\n};\r\n\r\n\r\n\r\n\r\nexport const deleteCollection = async(supId) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      console.log('step 2', supId);\r\n      const responce = await axios.post(`${apiUrl}/api/collections/delete`, { supId },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }\r\n      );\r\n      //console.log('step 3');\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error delete collection: ', error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}