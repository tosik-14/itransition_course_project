{"ast":null,"code":"import axios from 'axios';\nconst apiUrl = process.env.REACT_APP_API_URL;\nexport const getUserName = async (setUserName, setUserId) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/users/me`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setUserName(responce.data.name);\n      console.log('step 1', responce.data.name);\n      setUserId(responce.data.id);\n      console.log('step 2', responce.data);\n    } catch (error) {\n      console.error('error fetch user name: ', error);\n    }\n  }\n};\nexport const getUserRole = async setUserRole => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/users/role`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setUserRole(responce.data.role);\n    } catch (error) {\n      console.error('error fetch user role: ', error);\n    }\n  }\n};\nexport const getCollections = async setCollections => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/collections`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setCollections(responce.data);\n    } catch (error) {\n      console.error('error get collections: ', error);\n    }\n  }\n};\nexport const getLike = async (collectionId, setIsLike) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/collections/like`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        params: {\n          collectionId\n        }\n      });\n      setIsLike(responce.data.isLiked);\n      //console.log('step 2 like', responce.data.isLiked);\n      return responce;\n    } catch (error) {\n      console.error('error like/dislike: ', error);\n    }\n  }\n};","map":{"version":3,"names":["axios","apiUrl","process","env","REACT_APP_API_URL","getUserName","setUserName","setUserId","token","localStorage","getItem","responce","get","headers","Authorization","data","name","console","log","id","error","getUserRole","setUserRole","role","getCollections","setCollections","getLike","collectionId","setIsLike","params","isLiked"],"sources":["E:/itransition_course/course_project/client/src/components/utility.js"],"sourcesContent":["import axios from 'axios';\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nexport const getUserName = async(setUserName, setUserId) => {\r\n\tconst token = localStorage.getItem('token');\r\n\tif(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/users/me`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setUserName(responce.data.name);\r\n      console.log('step 1', responce.data.name);\r\n      setUserId(responce.data.id);\r\n      console.log('step 2', responce.data);\r\n    }\r\n    catch (error){\r\n      console.error('error fetch user name: ', error);\r\n    }\r\n  }\r\n};\r\n\r\nexport const getUserRole = async(setUserRole) => {\r\n\tconst token = localStorage.getItem('token');\r\n\tif(token){\r\n\t\ttry{\r\n      const responce = await axios.get(`${apiUrl}/api/users/role`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setUserRole(responce.data.role);\r\n    }\r\n    catch (error){\r\n      console.error('error fetch user role: ', error);\r\n    }\r\n\t}\r\n};\r\n\r\nexport const getCollections = async(setCollections) => {\r\n  const token = localStorage.getItem('token');\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/collections`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setCollections(responce.data);\r\n    }\r\n    catch (error){\r\n      console.error('error get collections: ', error);\r\n    }\r\n  }\r\n};\r\n\r\nexport const getLike = async(collectionId, setIsLike) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/collections/like`, { \r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}`},\r\n          params: { collectionId }\r\n      });\r\n      setIsLike(responce.data.isLiked);\r\n      //console.log('step 2 like', responce.data.isLiked);\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error like/dislike: ', error);\r\n    }\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}