{"ast":null,"code":"import axios from 'axios';\nconst apiUrl = process.env.REACT_APP_API_URL;\nexport const getUserName = async (setUserName, setUserId) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/users/me`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setUserName(responce.data.name);\n      //console.log('step 1', responce.data.name);\n      setUserId(responce.data.currentUserId);\n      //console.log('step 2', responce.data.currentUserId);\n    } catch (error) {\n      console.error('error fetch user name: ', error);\n    }\n  }\n};\nexport const getUserRole = async setUserRole => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/users/role`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setUserRole(responce.data.role);\n    } catch (error) {\n      console.error('error fetch user role: ', error);\n    }\n  }\n};\nexport const getProfileName = async (id, setCollectionOwnerName) => {\n  //console.log('getProfileName step 1', id);\n  try {\n    const responce = await axios.get(`${apiUrl}/api/users/nameById`, {\n      params: {\n        id\n      }\n    });\n    setCollectionOwnerName(responce.data.name);\n    console.log('getProfileName step 2', responce.data.name);\n  } catch (error) {\n    console.error('error fetch profile name: ', error);\n  }\n};\nexport const getCollections = async (setCollections, path, supId) => {\n  const token = localStorage.getItem('token');\n  console.log('step 1 user', supId);\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}${path}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        params: {\n          supId\n        }\n      });\n      setCollections(responce.data);\n\n      //console.log('collections: ', responce.data);\n    } catch (error) {\n      console.error('error get collections: ', error);\n    }\n  }\n};\nexport const getLike = async (collectionId, setIsLike) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/collections/like`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        params: {\n          collectionId\n        }\n      });\n      setIsLike(responce.data.isLiked);\n      //console.log('step 2 like', responce.data.isLiked);\n      return responce;\n    } catch (error) {\n      console.error('error like/dislike: ', error);\n    }\n  }\n};\nexport const setComment = async (collectionId, text) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      const responce = await axios.post(`${apiUrl}/api/comments/add`, {\n        collectionId,\n        text\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      //setNewComment(prevComments => [...prevComments, responce.data]);\n      //console.log('step 2 comm utility', responce.data);\n      return responce;\n    } catch (error) {\n      console.error('error add comment: ', error);\n    }\n  }\n};","map":{"version":3,"names":["axios","apiUrl","process","env","REACT_APP_API_URL","getUserName","setUserName","setUserId","token","localStorage","getItem","responce","get","headers","Authorization","data","name","currentUserId","error","console","getUserRole","setUserRole","role","getProfileName","id","setCollectionOwnerName","params","log","getCollections","setCollections","path","supId","getLike","collectionId","setIsLike","isLiked","setComment","text","post"],"sources":["E:/itransition_course/course_project/client/src/components/utility.js"],"sourcesContent":["import axios from 'axios';\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nexport const getUserName = async(setUserName, setUserId) => {\r\n\tconst token = localStorage.getItem('token');\r\n\tif(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/users/me`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setUserName(responce.data.name);\r\n      //console.log('step 1', responce.data.name);\r\n      setUserId(responce.data.currentUserId);\r\n      //console.log('step 2', responce.data.currentUserId);\r\n    }\r\n    catch (error){\r\n      console.error('error fetch user name: ', error);\r\n    }\r\n  }\r\n};\r\n\r\nexport const getUserRole = async(setUserRole) => {\r\n\tconst token = localStorage.getItem('token');\r\n\tif(token){\r\n\t\ttry{\r\n      const responce = await axios.get(`${apiUrl}/api/users/role`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setUserRole(responce.data.role);\r\n    }\r\n    catch (error){\r\n      console.error('error fetch user role: ', error);\r\n    }\r\n\t}\r\n};\r\n\r\nexport const getProfileName = async(id, setCollectionOwnerName) => {\r\n  //console.log('getProfileName step 1', id);\r\n  try{\r\n    const responce = await axios.get(`${apiUrl}/api/users/nameById`, { \r\n      params: { id } \r\n    });\r\n    setCollectionOwnerName(responce.data.name);\r\n    console.log('getProfileName step 2', responce.data.name)\r\n  }\r\n  catch (error){\r\n    console.error('error fetch profile name: ', error);\r\n  }\r\n  \r\n};\r\n\r\n\r\n\r\nexport const getCollections = async(setCollections, path, supId) => {\r\n  const token = localStorage.getItem('token');\r\n  console.log('step 1 user', supId);\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}${path}`, { \r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}`},\r\n        params: { supId }\r\n      });\r\n      setCollections(responce.data);\r\n\r\n      //console.log('collections: ', responce.data);\r\n    }\r\n    catch (error){\r\n      console.error('error get collections: ', error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const getLike = async(collectionId, setIsLike) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/collections/like`, { \r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}`},\r\n          params: { collectionId }\r\n      });\r\n      setIsLike(responce.data.isLiked);\r\n      //console.log('step 2 like', responce.data.isLiked);\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error like/dislike: ', error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const setComment = async(collectionId, text) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      const responce = await axios.post(`${apiUrl}/api/comments/add`, \r\n        { collectionId, text },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      //setNewComment(prevComments => [...prevComments, responce.data]);\r\n      //console.log('step 2 comm utility', responce.data);\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error add comment: ', error);\r\n    }\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}