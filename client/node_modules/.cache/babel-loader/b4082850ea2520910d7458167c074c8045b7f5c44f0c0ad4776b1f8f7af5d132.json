{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../index.css';import'bootstrap/dist/css/bootstrap.min.css';import axios from'axios';import{useNavigate,Link}from'react-router-dom';import LogoutButton from'./LogoutButton';import{getUserName,getCollections,getLike,getTags}from'./utility';import logo_light from'../images/logo_light.jpg';import'bootstrap-icons/font/bootstrap-icons.css';import CollectionMainContent from'./main_content/CollectionMainContent';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;const Collections=()=>{const navigate=useNavigate();const[userName,setUserName]=useState('');const[userId,setUserId]=useState(null);const[isLiked,setIsLiked]=useState(false);const[likesCount,setLikesCount]=useState(0);const[collections,setCollections]=useState([]);const[collectionMain,setCollectionMain]=useState(true);const[tags,setTags]=useState([]);useEffect(()=>{getUserName(setUserName,setUserId);getCollections(setCollections,'/api/collections/top5',null);getTags(setTags);},[navigate,isLiked,likesCount]);const handleLogin=()=>{navigate('/login');};const handleHomePage=()=>{navigate('/collections');};const handleProfile=()=>{navigate(`/profile/${userId}`);};const handleComment=e=>{e.preventDefault();};const toggleLike=async(e,id)=>{//e.stopPropagation();\ne.preventDefault();setIsLiked(prev=>!prev);setLikesCount(prev=>isLiked?prev-1:prev+1);try{const res=await getLike(id,setIsLiked);//console.error('step 1', res);\nif(res.status!=200){setIsLiked(prev=>!prev);setLikesCount(prev=>isLiked?prev+1:prev-1);}}catch(err){console.error('error like/dislike 57',err);setIsLiked(prev=>!prev);setLikesCount(prev=>isLiked?prev+1:prev-1);}};//<span className=\"me-3\">{userName}</span>     <div className=\"d-flex justify-content-end align-items-start\">   </div>\n// style={{ width: '100px', height: '100px' }} \nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-3 d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-start align-items-start\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-wight me-2\",onClick:handleHomePage,children:/*#__PURE__*/_jsx(\"img\",{src:logo_light,alt:\"Unblock\",style:{width:'350px'}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end align-items-start\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:userName?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary me-3\",onClick:handleProfile,children:userName}),/*#__PURE__*/_jsx(LogoutButton,{})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary me-2\",onClick:handleLogin,children:\"Log In\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center mb-3\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Top 5 collections\"})}),collectionMain?/*#__PURE__*/_jsx(CollectionMainContent,{collections:collections,toggleLike:toggleLike,handleComment:handleComment}):/*#__PURE__*/_jsx(LogoutButton,{})]})]});};export default Collections;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Link","LogoutButton","getUserName","getCollections","getLike","getTags","logo_light","CollectionMainContent","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","apiUrl","process","env","REACT_APP_API_URL","Collections","navigate","userName","setUserName","userId","setUserId","isLiked","setIsLiked","likesCount","setLikesCount","collections","setCollections","collectionMain","setCollectionMain","tags","setTags","handleLogin","handleHomePage","handleProfile","handleComment","e","preventDefault","toggleLike","id","prev","res","status","err","console","error","className","children","onClick","src","alt","style","width"],"sources":["E:/itransition_course/course_project/client/src/components/Collections.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../index.css'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axios from 'axios';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport LogoutButton from './LogoutButton';\r\n\r\nimport { getUserName, getCollections, getLike, getTags } from './utility';\r\n\r\nimport logo_light from '../images/logo_light.jpg'\r\nimport 'bootstrap-icons/font/bootstrap-icons.css';\r\n\r\nimport CollectionMainContent from './main_content/CollectionMainContent';\r\n\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nconst Collections = () => {\r\n  const navigate = useNavigate();\r\n  const [userName, setUserName] = useState('');\r\n  const [userId, setUserId] = useState(null);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [likesCount, setLikesCount] = useState(0);\r\n  const [collections, setCollections] = useState([]);\r\n  const [collectionMain, setCollectionMain] = useState(true);\r\n\r\n  const [tags, setTags] = useState([]);\r\n\r\n  useEffect(() => {\r\n  \r\n    getUserName(setUserName, setUserId);\r\n    getCollections(setCollections, '/api/collections/top5', null);\r\n    getTags(setTags);\r\n  }, [navigate, isLiked, likesCount]);\r\n\r\n  const handleLogin = () => {\r\n    navigate('/login');\r\n  };\r\n  const handleHomePage = () => {\r\n    navigate('/collections');\r\n  };\r\n  const handleProfile = () => {\r\n    navigate(`/profile/${userId}`);\r\n  };\r\n  const handleComment = (e) => {\r\n    e.preventDefault();\r\n  };\r\n  const toggleLike = async ( e, id ) => {\r\n    //e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    setIsLiked(prev => !prev);\r\n    setLikesCount(prev => isLiked ? prev - 1 : prev + 1);\r\n\r\n    try{\r\n      const res = await getLike(id, setIsLiked);\r\n      //console.error('step 1', res);\r\n      if(res.status != 200){\r\n        setIsLiked(prev => !prev);\r\n        setLikesCount(prev => isLiked ? prev + 1 : prev - 1);\r\n      }\r\n    }\r\n    catch(err){\r\n      console.error('error like/dislike 57', err);\r\n      setIsLiked(prev => !prev);\r\n      setLikesCount(prev => isLiked ? prev + 1 : prev - 1);\r\n    }\r\n  };\r\n\r\n\r\n//<span className=\"me-3\">{userName}</span>     <div className=\"d-flex justify-content-end align-items-start\">   </div>\r\n// style={{ width: '100px', height: '100px' }} \r\n  return (\r\n    \r\n    <div className=\"container-fluid\">\r\n\r\n      <div className=\"container mt-3 d-flex justify-content-between align-items-center\">\r\n\r\n        <div className=\"d-flex justify-content-start align-items-start\">\r\n            <button className=\"btn btn-wight me-2\" onClick={handleHomePage}>\r\n              <img src={logo_light} alt=\"Unblock\" style={{ width: '350px' }} />\r\n            </button>\r\n        </div>\r\n        <div className=\"d-flex justify-content-end align-items-start\"> \r\n          <div className=\"d-flex align-items-center\">\r\n            {userName ? (\r\n              <>\r\n                <button className=\"btn btn-primary me-3\" onClick={handleProfile}>{userName}</button>\r\n                <LogoutButton />\r\n              </>\r\n            ) : (\r\n              <button className=\"btn btn-primary me-2\" onClick={handleLogin}>Log In</button>\r\n            )}\r\n            \r\n          </div>\r\n        </div>\r\n      \r\n      </div>\r\n\r\n      \r\n      <div className=\"container mt-5\">\r\n        <div className=\"d-flex align-items-center mb-3\">\r\n          \r\n            <h2>Top 5 collections</h2>\r\n          \r\n        </div>\r\n\r\n\r\n        {collectionMain ? (\r\n          <CollectionMainContent\r\n            collections={collections}\r\n            toggleLike={toggleLike}\r\n            handleComment={handleComment}\r\n          />\r\n        ) : (\r\n          <LogoutButton /> \r\n        )}\r\n\r\n\r\n      </div>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Collections;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}