{"ast":null,"code":"import axios from 'axios';\nconst apiUrl = process.env.REACT_APP_API_URL;\nexport const getUserName = async (setUserName, setUserId) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/users/me`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setUserName(responce.data.name);\n      //console.log('step 1', responce.data.name);\n      setUserId(responce.data.currentUserId);\n      //console.log('step 2', responce.data.currentUserId);\n    } catch (error) {\n      console.error('error fetch user name: ', error);\n    }\n  }\n};\nexport const getUserRole = async setUserRole => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/users/role`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      setUserRole(responce.data.role);\n    } catch (error) {\n      console.error('error fetch user role: ', error);\n    }\n  }\n};\nexport const getCollections = async (setCollections, path, supId) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1 collection', id);\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}${path}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        params: {\n          supId\n        }\n      });\n      setCollections(responce.data);\n\n      //console.log('collections: ', responce.data);\n    } catch (error) {\n      console.error('error get collections: ', error);\n    }\n  }\n};\nexport const getLike = async (collectionId, setIsLike) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/collections/like`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        params: {\n          collectionId\n        }\n      });\n      setIsLike(responce.data.isLiked);\n      //console.log('step 2 like', responce.data.isLiked);\n      return responce;\n    } catch (error) {\n      console.error('error like/dislike: ', error);\n    }\n  }\n};\nexport const setComment = async (collectionId, text) => {\n  const token = localStorage.getItem('token');\n  //console.log('step 1');\n  if (token) {\n    try {\n      const responce = await axios.get(`${apiUrl}/api/comments/add`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        params: {\n          collectionId,\n          text\n        }\n      });\n      setIsLike(responce.data.isLiked);\n      //console.log('step 2 like', responce.data.isLiked);\n      return responce;\n    } catch (error) {\n      console.error('error like/dislike: ', error);\n    }\n  }\n};","map":{"version":3,"names":["axios","apiUrl","process","env","REACT_APP_API_URL","getUserName","setUserName","setUserId","token","localStorage","getItem","responce","get","headers","Authorization","data","name","currentUserId","error","console","getUserRole","setUserRole","role","getCollections","setCollections","path","supId","params","getLike","collectionId","setIsLike","isLiked","setComment","text"],"sources":["E:/itransition_course/course_project/client/src/components/utility.js"],"sourcesContent":["import axios from 'axios';\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nexport const getUserName = async(setUserName, setUserId) => {\r\n\tconst token = localStorage.getItem('token');\r\n\tif(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/users/me`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setUserName(responce.data.name);\r\n      //console.log('step 1', responce.data.name);\r\n      setUserId(responce.data.currentUserId);\r\n      //console.log('step 2', responce.data.currentUserId);\r\n    }\r\n    catch (error){\r\n      console.error('error fetch user name: ', error);\r\n    }\r\n  }\r\n};\r\n\r\nexport const getUserRole = async(setUserRole) => {\r\n\tconst token = localStorage.getItem('token');\r\n\tif(token){\r\n\t\ttry{\r\n      const responce = await axios.get(`${apiUrl}/api/users/role`, { headers: { Authorization: `Bearer ${localStorage.getItem('token')}`}});\r\n      setUserRole(responce.data.role);\r\n    }\r\n    catch (error){\r\n      console.error('error fetch user role: ', error);\r\n    }\r\n\t}\r\n};\r\n\r\n\r\n\r\nexport const getCollections = async(setCollections, path, supId) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1 collection', id);\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}${path}`, { \r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}`},\r\n        params: { supId }\r\n      });\r\n      setCollections(responce.data);\r\n\r\n      //console.log('collections: ', responce.data);\r\n    }\r\n    catch (error){\r\n      console.error('error get collections: ', error);\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const getLike = async(collectionId, setIsLike) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/collections/like`, { \r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}`},\r\n          params: { collectionId }\r\n      });\r\n      setIsLike(responce.data.isLiked);\r\n      //console.log('step 2 like', responce.data.isLiked);\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error like/dislike: ', error);\r\n    }\r\n  }\r\n};\r\n\r\nexport const setComment = async(collectionId, text) => {\r\n  const token = localStorage.getItem('token');\r\n  //console.log('step 1');\r\n  if(token){\r\n    try{\r\n      const responce = await axios.get(`${apiUrl}/api/comments/add`, { \r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}`},\r\n          params: { collectionId, text }\r\n      });\r\n      setIsLike(responce.data.isLiked);\r\n      //console.log('step 2 like', responce.data.isLiked);\r\n      return responce;\r\n    }\r\n    catch (error){\r\n      console.error('error like/dislike: ', error);\r\n    }\r\n  }\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AAE5C,OAAO,MAAMC,WAAW,GAAG,MAAAA,CAAMC,WAAW,EAAEC,SAAS,KAAK;EAC3D,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAGF,KAAK,EAAC;IACN,IAAG;MACD,MAAMG,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,GAAGX,MAAM,eAAe,EAAE;QAAEY,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUL,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAAE;MAAC,CAAC,CAAC;MACnIJ,WAAW,CAACK,QAAQ,CAACI,IAAI,CAACC,IAAI,CAAC;MAC/B;MACAT,SAAS,CAACI,QAAQ,CAACI,IAAI,CAACE,aAAa,CAAC;MACtC;IACF,CAAC,CACD,OAAOC,KAAK,EAAC;MACXC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACF;AACF,CAAC;AAED,OAAO,MAAME,WAAW,GAAG,MAAMC,WAAW,IAAK;EAChD,MAAMb,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAGF,KAAK,EAAC;IACR,IAAG;MACC,MAAMG,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,GAAGX,MAAM,iBAAiB,EAAE;QAAEY,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUL,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAAE;MAAC,CAAC,CAAC;MACrIW,WAAW,CAACV,QAAQ,CAACI,IAAI,CAACO,IAAI,CAAC;IACjC,CAAC,CACD,OAAOJ,KAAK,EAAC;MACXC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACH;AACD,CAAC;AAID,OAAO,MAAMK,cAAc,GAAG,MAAAA,CAAMC,cAAc,EAAEC,IAAI,EAAEC,KAAK,KAAK;EAClE,MAAMlB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C;EACA,IAAGF,KAAK,EAAC;IACP,IAAG;MACD,MAAMG,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,GAAGX,MAAM,GAAGwB,IAAI,EAAE,EAAE;QACnDZ,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUL,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAAE,CAAC;QACpEiB,MAAM,EAAE;UAAED;QAAM;MAClB,CAAC,CAAC;MACFF,cAAc,CAACb,QAAQ,CAACI,IAAI,CAAC;;MAE7B;IACF,CAAC,CACD,OAAOG,KAAK,EAAC;MACXC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACF;AACF,CAAC;AAID,OAAO,MAAMU,OAAO,GAAG,MAAAA,CAAMC,YAAY,EAAEC,SAAS,KAAK;EACvD,MAAMtB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C;EACA,IAAGF,KAAK,EAAC;IACP,IAAG;MACD,MAAMG,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,GAAGX,MAAM,uBAAuB,EAAE;QAC/DY,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUL,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAAE,CAAC;QACpEiB,MAAM,EAAE;UAAEE;QAAa;MAC3B,CAAC,CAAC;MACFC,SAAS,CAACnB,QAAQ,CAACI,IAAI,CAACgB,OAAO,CAAC;MAChC;MACA,OAAOpB,QAAQ;IACjB,CAAC,CACD,OAAOO,KAAK,EAAC;MACXC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C;EACF;AACF,CAAC;AAED,OAAO,MAAMc,UAAU,GAAG,MAAAA,CAAMH,YAAY,EAAEI,IAAI,KAAK;EACrD,MAAMzB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C;EACA,IAAGF,KAAK,EAAC;IACP,IAAG;MACD,MAAMG,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,GAAGX,MAAM,mBAAmB,EAAE;QAC3DY,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUL,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAAE,CAAC;QACpEiB,MAAM,EAAE;UAAEE,YAAY;UAAEI;QAAK;MACjC,CAAC,CAAC;MACFH,SAAS,CAACnB,QAAQ,CAACI,IAAI,CAACgB,OAAO,CAAC;MAChC;MACA,OAAOpB,QAAQ;IACjB,CAAC,CACD,OAAOO,KAAK,EAAC;MACXC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}